
<app-calendar-header
[(view)]="view"
[(viewDate)]="viewDate">
</app-calendar-header>

<div class="alert alert-info">
  Click on a day on the view.
  <strong *ngIf="clickedDate">You clicked on this day: {{ clickedDate | date:'medium' }}</strong>
</div>

<div [ngSwitch]="view">
<mwl-calendar-month-view
  *ngSwitchCase="'month'"
  [activeDayIsOpen]="activeDayIsOpen"
  [cellTemplate]="monthCellTemplate"
  [events]="events"
  [refresh]="refresh"
  [viewDate]="viewDate"
  (dayClicked)="monthDayClicked($event)"
  (eventTimesChanged)="eventTimesChanged($event)"
  (eventClicked)="eventClicked($event)">
</mwl-calendar-month-view>
<mwl-calendar-week-view
  *ngSwitchCase="'week'"
  [events]="events"
  [refresh]="refresh"
  [viewDate]="viewDate"
  (dayHeaderClicked)="dayHeaderClicked($event)"
  (eventTimesChanged)="eventTimesChanged($event)"
  (eventClicked)="eventClicked($event)">
</mwl-calendar-week-view>
<app-calendar-note-day-view
*ngSwitchCase="'day'"
[events]="events"
[viewDate]="viewDate"
(eventTimesChanged)="eventTimesChanged($event)"
(eventClicked)="eventClicked($event)">
</app-calendar-note-day-view>
<!-- <mwl-calendar-day-view
  *ngSwitchCase="'day'"
  [viewDate]="viewDate"
  [events]="events"
  [refresh]="refresh"
  (eventTimesChanged)="eventTimesChanged($event)"
  (eventClicked)="eventClicked($event)">
</mwl-calendar-day-view> -->
</div>

<!-- CUSTOM MONTH -->
<ng-template
#monthCellTemplate
let-day="day"
let-openDay="openDay"
let-locale="locale"
let-tooltipPlacement="tooltipPlacement"
let-highlightDay="highlightDay"
let-unhighlightDay="unhighlightDay"
let-eventClicked="eventClicked">

<div class="fill-height" [contextMenu]="basicMenu" [contextMenuSubject]="day.date">
  <div class="cal-cell-top">
    <span class="cal-day-badge" *ngIf="day.badgeTotal > 0">{{ day.badgeTotal }}</span>
    <span class="cal-day-number">{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span>
  </div>
  <div class="cal-events">
    <div
      class="cal-event"
      *ngFor="let event of day.events"
      [style.backgroundColor]="event.color.primary"
      [ngClass]="event?.cssClass"
      (mouseenter)="highlightDay.emit({event: event})"
      (mouseleave)="unhighlightDay.emit({event: event})"
      [mwlCalendarTooltip]="event.title | calendarEventTitle:'monthTooltip':event"
      [tooltipPlacement]="tooltipPlacement"
      (click)="$event.stopPropagation(); eventClicked.emit({event: event})">
    </div>
  </div>
</div>
</ng-template>



<!-- CONTEXT MENU -->
<context-menu #basicMenu>
  <ng-template contextMenuItem (execute)="addEvent($event.item)">
    Add Project
  </ng-template>
</context-menu>



<!-- <mwl-calendar-month-view
*ngSwitchCase="'month'"
[activeDayIsOpen]="activeDayIsOpen"
[events]="events"
[viewDate]="viewDate"
(dayClicked)="monthDayClicked($event)"
(eventTimesChanged)="eventTimesChanged($event)"
(eventClicked)="eventClicked($event)">
  <button (click)="monthDayClicked($event)">deets</button>
</mwl-calendar-month-view> -->